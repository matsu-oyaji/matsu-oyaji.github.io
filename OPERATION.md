# 松ケ丘小学校おやじの会 - ウェブサイト運用マニュアル

このマニュアルは、プログラマーでない方でもウェブサイトの運用・更新ができるように作成されています。
手順に従って作業することで、安全にサイトを更新することができます。

## 目次

1. [全体的なアーキテクチャーの説明](#1-全体的なアーキテクチャーの説明)
2. [GitHubとVitePressについて](#2-githubとvitepressについて)
3. [開発環境の構築](#3-開発環境の構築)
4. [デプロイ手順](#4-デプロイ手順)
5. [コンテンツの更新方法](#5-コンテンツの更新方法)
6. [トラブルシューティング](#6-トラブルシューティング)

---

## 1. 全体的なアーキテクチャーの説明

### システム全体の構成

```
ローカル環境（あなたのパソコン）
    ↓ 作業・編集
GitHub（オンラインのコード保管庫）
    ↓ 自動デプロイ
GitHub Pages（実際のウェブサイト）
```

### 各コンポーネントの役割

#### 1.1 ローカル環境
- **役割**: サイトの内容を編集・確認する場所
- **場所**: あなたのパソコン
- **作業内容**: 記事の編集、画像の追加、レイアウトの変更など

#### 1.2 GitHub（ギットハブ）
- **役割**: ファイルを安全に保管し、変更履歴を管理
- **機能**: 
  - ファイルのバックアップ
  - 変更履歴の保存
  - 複数人での共同作業
  - 自動デプロイの実行

#### 1.3 GitHub Pages
- **役割**: 実際にインターネットで公開されるウェブサイト
- **URL**: https://matsu-oyaji.github.io/
- **更新タイミング**: GitHubにファイルをアップロードすると自動的に更新（約5-10分）

#### 1.4 VitePress
- **役割**: マークダウンファイル（.md）をウェブサイトに変換するツール
- **特徴**: 
  - 高速で軽量
  - モダンなデザイン
  - スマートフォン対応
  - 検索機能内蔵

---

## 2. GitHubとVitePressについて

### 2.1 GitHubとは

GitHubは、プログラムのソースコードを保管・管理するオンラインサービスです。
このプロジェクトでは以下の機能を使用しています：

- **リポジトリ**: ファイルの保管庫
- **コミット**: ファイルの変更記録
- **プッシュ**: ローカルの変更をGitHubに送信
- **Actions**: 自動実行される処理（デプロイなど）

### 2.2 VitePressとは

VitePressは、マークダウン形式のファイルから静的なウェブサイトを生成するツールです。

#### マークダウンの例
```markdown
# 見出し1
## 見出し2

これは**太字**の文章です。
これは*斜体*の文章です。

- リスト項目1
- リスト項目2

[リンクテキスト](https://example.com)

![画像の説明](画像のパス)
```

#### 生成されるウェブサイトの特徴
- レスポンシブデザイン（PC・スマホ両対応）
- 高速表示
- SEO対応
- ダークモード対応（設定により無効化）

---

## 3. 開発環境の構築

### 3.1 必要なソフトウェア

#### Windows・Mac共通で必要なもの
1. **Node.js** (JavaScript実行環境)
2. **Git** (ファイル管理ツール)
3. **VS Code** (コードエディタ、推奨)

### 3.2 Node.jsのインストール

#### Windows
1. https://nodejs.org/ にアクセス
2. 「LTS」版（推奨版）をダウンロード
3. ダウンロードしたファイルを実行
4. インストーラーの指示に従ってインストール（基本的に「次へ」を押していく）

#### Mac
1. https://nodejs.org/ にアクセス
2. 「LTS」版（推奨版）をダウンロード
3. ダウンロードしたファイルを実行
4. インストーラーの指示に従ってインストール

#### インストール確認
1. **Windows**: 「スタートメニュー」→「cmd」と入力してコマンドプロンプトを開く
2. **Mac**: 「Spotlight検索」（Command + Space）→「terminal」と入力してターミナルを開く
3. 以下のコマンドを入力して Enter キーを押す：
   ```
   node --version
   ```
4. バージョン番号（例：v18.17.0）が表示されればOK

### 3.3 Gitのインストール

#### Windows
1. https://git-scm.com/ にアクセス
2. 「Download for Windows」をクリック
3. ダウンロードしたファイルを実行
4. インストーラーの指示に従ってインストール（基本的にデフォルトのまま）

#### Mac
Gitは通常macOSに標準でインストールされています。
確認方法は下記の「インストール確認」を参照してください。

#### インストール確認
1. コマンドプロンプトまたはターミナルで以下を実行：
   ```
   git --version
   ```
2. バージョン番号が表示されればOK

### 3.4 VS Codeのインストール（推奨）

1. https://code.visualstudio.com/ にアクセス
2. 「Download for Windows/Mac」をクリック
3. ダウンロードしたファイルを実行してインストール

### 3.5 プロジェクトの取得

#### 3.5.1 GitHubアカウントの準備
1. https://github.com/ でアカウントを作成
2. プロジェクトの管理者にアカウント名を伝えて、アクセス権限をもらう

#### 3.5.2 プロジェクトのダウンロード

**方法1: GitHub Desktop を使用（推奨・簡単）**

1. https://desktop.github.com/ から GitHub Desktop をダウンロード・インストール
2. GitHub Desktop を起動してアカウントでログイン
3. 「Clone a repository from the Internet」をクリック
4. 「URL」タブで以下を入力：
   ```
   https://github.com/matsu-oyaji/matsu-oyaji.github.io
   ```
5. 「Local path」で保存先フォルダを選択（例：デスクトップの「matsu-oyaji」フォルダ）
6. 「Clone」をクリック

**方法2: コマンドライン使用**

1. 作業したいフォルダでコマンドプロンプト/ターミナルを開く
2. 以下のコマンドを実行：
   ```
   git clone https://github.com/matsu-oyaji/matsu-oyaji.github.io.git
   ```

### 3.6 開発用パッケージのインストール

#### VS Codeを使用する場合（推奨）
1. VS Codeでプロジェクトフォルダを開く
2. メニューから「表示」→「ターミナル」を選択
3. ターミナルで以下のコマンドを実行：
   ```
   npm install
   ```

#### コマンドラインを使用する場合
1. プロジェクトフォルダに移動
2. 以下のコマンドを実行：
   ```
   npm install
   ```

### 3.7 ローカルサーバーの起動

1. VS Codeのターミナル、またはコマンドプロンプト/ターミナルで以下を実行：
   ```
   npm run dev
   ```
2. 「Local: http://localhost:5173/」のようなメッセージが表示される
3. ブラウザで http://localhost:5173/ にアクセス
4. サイトが表示されれば成功

**停止方法**: ターミナルで `Ctrl + C` を押す

---

## 4. デプロイ手順

デプロイ（公開）は自動で行われますが、手動で実行することも可能です。

### 4.1 自動デプロイ（通常の方法）

1. ローカルで変更を行う
2. GitHubに変更をプッシュ（後述）
3. GitHub Actionsが自動的に実行される
4. 約5-10分後にサイトが更新される

### 4.2 手動デプロイ

#### GitHub上で手動実行
1. https://github.com/matsu-oyaji/matsu-oyaji.github.io にアクセス
2. 「Actions」タブをクリック
3. 左側の「Deploy」をクリック
4. 「Run workflow」ボタンをクリック
5. 「Run workflow」を再度クリック

#### ローカルからの確認
変更をGitHubにプッシュする前に、ローカルでビルドテストを行うことができます：

```bash
npm run build
```

エラーが表示されなければ、デプロイも成功します。

### 4.3 デプロイ状況の確認

1. GitHubのリポジトリページにアクセス
2. 「Actions」タブで実行状況を確認
3. 緑のチェックマーク：成功
4. 赤のバツマーク：失敗（ログを確認して修正が必要）

---

## 5. コンテンツの更新方法

### 5.1 基本的な作業フロー

```
1. ローカルで編集
   ↓
2. ローカルで確認（npm run dev）
   ↓
3. 変更をコミット
   ↓
4. GitHubにプッシュ
   ↓
5. 自動デプロイ
   ↓
6. 本番サイト更新
```

### 5.2 ページ内容の編集

#### 5.2.1 既存ページの編集

**編集対象のファイル:**
- `index.md` - トップページ
- `letters.md` - おやじの会通信
- `minutes.md` - 会則・議事録
- `inquiry.md` - お問い合わせページ
- `activities.md` - 活動内容
- `principal.md` - 校長先生ごあいさつ（※）
- `links.md` - リンク集（※）

（※ 更新されてないためリンクなし）

**編集手順:**
1. VS Codeで対象ファイルを開く
2. マークダウン形式で編集
3. `Ctrl + S`（Windows）または `Cmd + S`（Mac）で保存
4. ローカルサーバーでプレビュー確認

#### 5.2.2 マークダウン記法の基本

```markdown
# 大見出し（H1）
## 中見出し（H2）
### 小見出し（H3）

**太字の文字**
*斜体の文字*

- 箇条書き項目1
- 箇条書き項目2
  - サブ項目

1. 番号付きリスト1
2. 番号付きリスト2

[リンクテキスト](https://example.com)

![画像の説明文](/img/画像ファイル名.jpg)

> 引用文

---

段落の区切りは空行を入れます。

段落1

段落2
```

### 5.3 画像の追加・更新

#### 5.3.1 画像ファイルの配置

**画像保存場所:**
- 一般的な画像: `public/img/`
- イベント関連: `public/event/`
- おやじの会通信: `public/letter/`

**推奨画像形式:**
- `.jpg` - 写真
- `.png` - ロゴ、透明背景が必要な画像
- `.gif` - アニメーション

**ファイル名の規則:**
- 半角英数字とハイフン、アンダースコアのみ使用
- 日本語や空白は使用しない
- 例: `2024_summer_festival.jpg`

#### 5.3.2 画像の最適化

**推奨サイズ:**
- 幅1200px以下
- ファイルサイズ500KB以下

**画像圧縮ツール（オンライン）:**
- TinyPNG: https://tinypng.com/
- Squoosh: https://squoosh.app/

#### 5.3.3 マークダウンでの画像表示

```markdown
![画像の説明文](/img/sample.jpg)

<!-- 画像サイズを指定したい場合 -->
<img src="/img/sample.jpg" alt="画像の説明文" width="300">
```

### 5.4 PDFファイルの追加

#### 5.4.1 PDF保存場所
- 会則・規約: `public/docs/`
- イベント案内: `public/event/`

#### 5.4.2 PDFへのリンク
```markdown
[PDFファイル名](/docs/sample.pdf)
```

### 5.5 ナビゲーションメニューの変更

ナビゲーションメニューは `.vitepress/config.ts` ファイルで設定します。

```typescript
nav: [
  { text: "🏠 ホーム", link: "/" },
  { text: "📰 おやじの会通信", link: "/letters" },
  { text: "📋 会則・議事録", link: "/minutes" },
  { text: "📞 お問い合わせ", link: "/inquiry" }
],
```

**新しいページを追加する場合:**
1. 新しい `.md` ファイルを作成
2. `config.ts` の `nav` 配列に項目を追加

### 5.6 変更の保存とGitHubへのアップロード

#### 5.6.1 GitHub Desktop を使用（推奨）

1. GitHub Desktop を開く
2. 左側に変更されたファイル一覧が表示される
3. 下部の「Summary」に変更内容を簡潔に記入（例：「おやじの会通信を更新」）
4. 「Commit to main」をクリック
5. 「Push origin」をクリック

#### 5.6.2 VS Code を使用

1. VS Code で `Ctrl + Shift + G`（Windows）または `Cmd + Shift + G`（Mac）
2. 変更されたファイルが一覧表示される
3. ファイル名の右側の「+」をクリックしてステージング
4. 上部のテキストボックスに変更内容を記入
5. `Ctrl + Enter`（Windows）または `Cmd + Enter`（Mac）でコミット
6. 「…」メニューから「Push」を選択

#### 5.6.3 コマンドライン使用

```bash
# 変更状況確認
git status

# すべての変更をステージング
git add .

# コミット（変更内容を記録）
git commit -m "変更内容の説明"

# GitHubにプッシュ
git push
```

---

## 6. トラブルシューティング

### 6.1 よくある問題と解決方法

#### 6.1.1 ローカルサーバーが起動しない

**症状**: `npm run dev` でエラーが出る

**解決方法**:
1. Node.jsが正しくインストールされているか確認
   ```
   node --version
   npm --version
   ```
2. パッケージを再インストール
   ```
   npm install
   ```
3. ポートが使用中の場合、別のポートを使用
   ```
   npm run dev -- --port 3000
   ```

#### 6.1.2 画像が表示されない

**原因**:
- ファイルパスが間違っている
- ファイル名に日本語や空白が含まれている
- ファイルが正しい場所に配置されていない

**解決方法**:
1. ファイルパスを確認（`/public/` は不要）
2. ファイル名を半角英数字に変更
3. ファイルが `public/` フォルダ内にあることを確認

#### 6.1.3 デプロイが失敗する

**確認事項**:
1. GitHubのActionsタブでエラーログを確認
2. ローカルで `npm run build` を実行してエラーがないか確認
3. マークダウンの記法に誤りがないか確認

#### 6.1.4 変更がサイトに反映されない

**確認事項**:
1. GitHubに正しくプッシュされているか確認
2. GitHub Actionsが成功しているか確認
3. ブラウザのキャッシュをクリア（強制再読み込み）
   - Windows: `Ctrl + F5`
   - Mac: `Cmd + Shift + R`

### 6.2 緊急時の対応

#### 6.2.1 サイトが表示されなくなった場合

1. **最新の変更を確認**
   - GitHubで最新のコミットを確認
   - 問題がある変更を特定

2. **前のバージョンに戻す**
   - GitHub Desktop で「History」タブを開く
   - 問題のない時点のコミットを右クリック
   - 「Revert changes」を選択

3. **管理者に連絡**
   - 技術的な問題の場合は管理者に連絡
   - エラーログのスクリーンショットを添付

#### 6.2.2 ファイルを誤って削除した場合

1. **GitHubから復元**
   - ローカルの変更を破棄
   - GitHubから最新版を取得
   ```bash
   git checkout -- ファイル名
   ```

2. **GitHub Desktop使用**
   - 変更一覧で削除されたファイルを確認
   - 右クリックで「Discard changes」

### 6.3 連絡先

技術的な問題で解決できない場合は、以下に連絡してください：

- **GitHub管理者**: [管理者の連絡先]
- **技術サポート**: [技術サポートの連絡先]

---

## 付録

### A. ファイル構成の詳細

```
/
├── .vitepress/
│   ├── config.ts          # サイト設定ファイル
│   └── theme/
│       ├── index.js       # テーマ設定
│       └── custom.css     # カスタムスタイル
├── public/                # 静的ファイル（画像、PDF等）
│   ├── img/              # 一般画像
│   ├── event/            # イベント関連ファイル
│   ├── letter/           # おやじの会通信
│   ├── docs/             # PDF文書
│   └── favicon/          # サイトアイコン
├── index.md              # トップページ
├── letters.md            # おやじの会通信一覧
├── minutes.md            # 会則・議事録
├── inquiry.md            # お問い合わせ
├── activities.md         # 活動内容
├── principal.md          # 校長先生ごあいさつ
├── links.md              # リンク集
├── package.json          # プロジェクト設定
└── README.md             # 開発者向け説明書
```

### B. マークダウン記法チートシート

| 記法 | 結果 |
|------|------|
| `# 見出し1` | <h1>見出し1</h1> |
| `## 見出し2` | <h2>見出し2</h2> |
| `**太字**` | **太字** |
| `*斜体*` | *斜体* |
| `[リンク](URL)` | リンク |
| `![画像](パス)` | 画像表示 |
| `> 引用` | 引用文 |
| `- リスト` | 箇条書き |
| `1. 番号` | 番号付きリスト |
| `` `コード` `` | インラインコード |

### C. 定期的なメンテナンス

#### 月次作業
- [ ] リンク切れのチェック
- [ ] 画像の表示確認
- [ ] 新しいコンテンツの追加検討

#### 年次作業
- [ ] Node.jsバージョンの更新確認
- [ ] VitePressバージョンの更新確認
- [ ] 古いイベント情報のアーカイブ

---

*このマニュアルは定期的に更新されます。最新版をご確認ください。*
*更新日: 2025年7月31日*
